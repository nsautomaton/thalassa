<html>
<title>Thalassa.io</title>
<head>
<meta charset='utf-8'>
<link href="stylesheets/styles.css" rel="stylesheet" type="text/css">
  <!--[if lt IE 9]> 
  <script> document.createElement("curly");
  </script>
  <![endif]-->
<script type="text/javascript" src="<script src="http://code.jquery.com/jquery-latest.min.js" ></script>"></script>
  <script>
  $(document).ready(function(){
    $("code, .code").each(function(){ 
	  that = $(this);
	  var arr = $(this).html().split('"');
	  var i = 0;
	    $.each(arr, function(index, value) {
		  if(index != i)
		  {
          that.html(that.html().replace(value, '<quoted>' + value + '</quoted>'));
		  }else{
		    i += 2;
			}
        });
	  var arr = $(this).html().split("'");
	  var i = 0;
	    $.each(arr, function(index, value) {
		  if(index != i)
		  {
          that.html(that.html().replace(value, '<quoted>' + value + '</quoted>'));
		  }else{
		    i += 2;
			}
        });
	  $(this).html($(this).html().replace(/\{/g, '<curly>{</curly>'));
      $(this).html($(this).html().replace(/\}/g, '<curly>}</curly>'));
      $(this).html($(this).html().replace(/\:/g, '<colon>:</colon>'));
      $(this).html($(this).html().replace(/"/g, '<quote>"</quote>'));
      $(this).html($(this).html().replace(/\(/g, '<brackets>(</brackets>'));
      $(this).html($(this).html().replace(/\)/g, '<brackets>)</brackets>'));
      $(this).html($(this).html().replace(/tag/g, '<tag>'+'&#60;?php'+'</tag>'));
    });
  });
  </script>
</head>
<body>
  <section class="jumpto">
    <h4>
	<a href="#whatis">what is this?</a><br>
	<a href="#features">features</a><br>
	<a href="#installing">Installing | Downloads</a><br>
	<a href="#hello_world">Hello world!..a simple example</a><br>
	</h4>
  </section>
  <section class="main">
  <h3><a name="whatis">What exactly is this?</a></h3>
  <p>Thalassa is a lightweight implementation of the <a href="http://wamp.ws/">WAMP V2 protocol</a>, written in php.</p>
  <h3><a name="!whatis">!What is</a></h3>
      <p>Thalassa is <i>not</i> a web-socket server.Although it is built upon web-sockets and fully implements the
      web-socket protocol,</br> Thalassa will only work for clients implementing WAMP as a websocket sub-protocol, and hence is
	  better defined as a WAMP</br> server, as opposed to a WAMP-capable websocket server.</p>
  <h3><a name="features">Features</a></h3>
      <p>Thalassa features an event-driven IO using libevent, and implements the role of a router and a dealer.</p>
  <h3><a name="requirements">Requirements</a></h4>
      <p>A working installation of the <a href="http://libevent.org/">libevent library</a> and <a href="http://pecl.php.net/package/libevent">necessary extensions.</a></p>
  <h3><a name="installing">Installing</a></h3>
      <p>Composer:</p>
	  <pre><code>"require": {"nsautomaton/thalassa": "dev-master"}</code></pre>
  <h3><a name="hello_world">Hello world!</a></h3>
      <div class="code">
	  <pre>
tag
namespace wampComponent;
use Thalassa\wampAppInterface;
use Thalassa\Dealer\proceduresInterface;
use Thalassa\Router\channelsInterface;
class wampApp implements wampAppInterface{
    public function onOpen($conn, $sessionKey){}
	
    public function onSubscribe(channelsInterface $channelAccess, $conn, $requestID, $channel)
    {
    $channelAccess->add($conn, $channel, $requestID);
    }
   
    public function onUnsubscribe(channelsInterface $channelAccess, $conn, $channel, $requestID)
    {
    $channelAccess->delete($conn, $channel, $requestID);
    }
   
    public function onPublish(channelsInterface $channelAccess, $conn, array $data, array $options)
    {
    $channelAccess->broadcast($channelAccess, $conn, $data, $options);
    }

    public function onRegister(proceduresInterface $exe, $conn, $call, $requestID, array $options)
    {}
	
    public function onUnregister(proceduresInterface $exe, $conn, $regID, $requestID)
    {}
	
    public function onCall(proceduresInterface $exe, $conn, $call, array $args, array $options)
    {}
	
    public function onError($conn, $details){}
	
    public function onClose($conn){}
}
	  </pre>
	  </div>
      <p>The snippet is a bare minimum of a wamp server.all it does is handle subscriptions and route</br>
         messages between subscribers.</p>
      <p>In your project directory, create a folder "src", if it doesn't exist yet.</p>
      <p>In "src", create a folder "wampComponent."</p>
      <p>Save the code as "wampApp.php". Alternatively, you can save it as whatever_name_you_like,</br>
	  provided the class name matches the file name.This is because we're using psr-0 autoloading.</br>
	  Similarly, the folder "wampComponent" could be any name you like, as long as it matches the</br>
	  namespace of the code that resides in it.</p>
	  <p>...and now the shell script:</p>
	  <div class="code">
	  <pre>
tag
use Thalassa\Server;
use wampComponent\wampApp;
require dirname(__DIR__) . '/vendor/autoload.php';
    $host = '0.0.0.0';
    $port = 9000;
$app = new wampApp;
$server = new Server($host, $port);
$server->Build($app);
$server->start();
	  </pre>
	  </div>
	  <p>Create a folder "bin" and save the code simply as daemon.php</p>
	  <p>That's all.To start the server simply cd your way to to /bin and type the command:</p>
	  <code>php daemon.php</code>
  </section>
</body>
</html>
